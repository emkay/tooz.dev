<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="Description" content="&lt;p&gt;The operating system was meant to execute programs and a &lt;em&gt;process&lt;/em&gt; is an instance of an executing program. In Linux the &lt;code&gt;/proc&lt;/code&gt; directory contains information about processes that are running. Each process running has a subdirectory...">
    <link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css">
    <link rel="stylesheet" href="/highlight.css">
    <title>/proc</title>
  </head>
  <body class="fl w-100 sans-serif">
    <main class="fl w-100">
      <article class="vh-100 dt w-100">
        <div class="dtc tc white ph3 ph4-l">
          <header class="navy f6">
            <h1 class="f4-m f-subheadline-l fw6 tc baskerville"><a class="navy link hover-light-pink" href="/">tooz.dev</a></h1>
            <h2 class="f7 fw7 ttu tracked lh-title mt0 mb3 avenir">Fri, 14 Nov 2025 16:20:00 GMT</h2>
          </header>
        </div>
        <article class="pa3 pa5-ns">
          <header>
            <h1 class="f3 f1-m f-headline-l">/proc
          </header>
          <div class="f3 mw8 lh-copy">
            <p>The operating system was meant to execute programs and a <em>process</em> is an instance of an executing program. In Linux the <code>/proc</code> directory contains information about processes that are running. Each process running has a subdirectory that is the PID of the process.</p>
<p>This PID is a positive integer and it is a unique identifier of a process on the system. It is associated with the parent that created the process by PPID (parent process identifier). All processes have a common ancestor <code>init</code> or PID 1. This creats a tree of processes that can be viewed by using the tool <code>pstree</code>.</p>
<h2><code>/proc</code> Contents</h2>
<p>Inside will look something like this:</p>
<pre class="language-text"><code class="language-text"><span class="highlight-line">$ ls /proc/470</span><br><span class="highlight-line"></span><br><span class="highlight-line">attr	   cmdline	    environ  io</span><br><span class="highlight-line">loginuid   mounts	oom_adj</span><br><span class="highlight-line">projid_map  setgroups	statm		timers</span><br><span class="highlight-line">autogroup   comm	    exe</span><br><span class="highlight-line">ksm_merging_pages  map_files  mountstats</span><br><span class="highlight-line">oom_score root	  smaps	 status	timerslack_ns</span><br><span class="highlight-line">auxv	   coredump_filter  fd       ksm_stat</span><br><span class="highlight-line">maps	   net		oom_score_adj</span><br><span class="highlight-line">sched	  smaps_rollup  syscall	uid_map</span><br><span class="highlight-line">cgroup	   cpuset	    fdinfo   latency</span><br><span class="highlight-line">mem	   ns		pagemap</span><br><span class="highlight-line">schedstat   stack	task		wchan</span><br><span class="highlight-line">clear_refs  cwd		    gid_map  limits</span><br><span class="highlight-line">mountinfo  numa_maps	personality</span><br><span class="highlight-line">sessionid   stat		timens_offsets</span><br><span class="highlight-line"></span></code></pre>
<h2><code>stat</code> and <code>status</code></h2>
<p>The two files I want to focus on right now is <code>stat</code> and <code>status</code>. As I understand it they contain about the same information, but <code>status</code> is a more human readable form.</p>
<pre class="language-text"><code class="language-text"><span class="highlight-line">$ cat /proc/470/status</span><br><span class="highlight-line"></span><br><span class="highlight-line">Name:	systemd-timesyn</span><br><span class="highlight-line">Umask:	0022</span><br><span class="highlight-line">State:	S (sleeping)</span><br><span class="highlight-line">Tgid:	470</span><br><span class="highlight-line">Ngid:	0</span><br><span class="highlight-line">Pid:	470</span><br><span class="highlight-line">PPid:	1</span><br><span class="highlight-line">TracerPid:	0</span><br><span class="highlight-line">Uid:	996	996	996	996</span><br><span class="highlight-line">Gid:	996	996	996	996</span><br><span class="highlight-line">FDSize:	128</span><br><span class="highlight-line">Groups:	996</span><br><span class="highlight-line">NStgid:	470</span><br><span class="highlight-line">NSpid:	470</span><br><span class="highlight-line">NSpgid:	470</span><br><span class="highlight-line">NSsid:	470</span><br><span class="highlight-line">Kthread:	0</span><br><span class="highlight-line">VmPeak:	 156296 kB</span><br><span class="highlight-line">VmSize:	  90760 kB</span><br><span class="highlight-line">VmLck:	      0 kB</span><br><span class="highlight-line">VmPin:	      0 kB</span><br><span class="highlight-line">VmHWM:	   6912 kB</span><br><span class="highlight-line">VmRSS:	   6912 kB</span><br><span class="highlight-line">RssAnon:	    768 kB</span><br><span class="highlight-line">RssFile:	   6144 kB</span><br><span class="highlight-line">RssShmem:	      0 kB</span><br><span class="highlight-line">VmData:	   8800 kB</span><br><span class="highlight-line">VmStk:	    132 kB</span><br><span class="highlight-line">VmExe:	     52 kB</span><br><span class="highlight-line">VmLib:	  14048 kB</span><br><span class="highlight-line">VmPTE:	     76 kB</span><br><span class="highlight-line">VmSwap:	      0 kB</span><br><span class="highlight-line">HugetlbPages:	      0 kB</span><br><span class="highlight-line">CoreDumping:	0</span><br><span class="highlight-line">THP_enabled:	1</span><br><span class="highlight-line">untag_mask:	0xffffffffffffff</span><br><span class="highlight-line">Threads:	2</span><br><span class="highlight-line">SigQ:	0/7537</span><br><span class="highlight-line">SigPnd:	0000000000000000</span><br><span class="highlight-line">ShdPnd:	0000000000000000</span><br><span class="highlight-line">SigBlk:	0008000000004002</span><br><span class="highlight-line">SigIgn:	0000000000001000</span><br><span class="highlight-line">SigCgt:	0000000100000000</span><br><span class="highlight-line">CapInh:	0000000002000000</span><br><span class="highlight-line">CapPrm:	0000000002000000</span><br><span class="highlight-line">CapEff:	0000000002000000</span><br><span class="highlight-line">CapBnd:	0000000002000000</span><br><span class="highlight-line">CapAmb:	0000000002000000</span><br><span class="highlight-line">NoNewPrivs:	1</span><br><span class="highlight-line">Seccomp:	2</span><br><span class="highlight-line">Seccomp_filters:	20</span><br><span class="highlight-line">Speculation_Store_Bypass:	vulnerable</span><br><span class="highlight-line">SpeculationIndirectBranch:	unknown</span><br><span class="highlight-line">Cpus_allowed:	3</span><br><span class="highlight-line">Cpus_allowed_list:	0-1</span><br><span class="highlight-line">Mems_allowed:	00000000,00000001</span><br><span class="highlight-line">Mems_allowed_list:	0</span><br><span class="highlight-line">voluntary_ctxt_switches:	216</span><br><span class="highlight-line">nonvoluntary_ctxt_switches:	59</span></code></pre>
<p>Pretty cool! You are going to have a subdirectory for every process running on your system and be able to get a ton of info about them. You an every programatically look at the files in those directories and use that information to see what your process is doing. This is how tools like <code>ps</code> and <code>top</code> work.</p>
<p>Here is a small example of doing this in Rust:</p>
<pre class="language-rust"><code class="language-rust"><span class="highlight-line"><span class="token keyword">let</span> entries<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span>_<span class="token operator">></span> <span class="token operator">=</span> <span class="token namespace">fs<span class="token punctuation">::</span></span><span class="token function">read_dir</span><span class="token punctuation">(</span><span class="token string">"/proc"</span><span class="token punctuation">)</span><span class="token operator">?</span></span><br><span class="highlight-line">        <span class="token punctuation">.</span><span class="token function">filter_map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>res<span class="token closure-punctuation punctuation">|</span></span> res<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>e<span class="token closure-punctuation punctuation">|</span></span> e<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>path<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            path<span class="token punctuation">.</span><span class="token function">file_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">                <span class="token punctuation">.</span><span class="token function">and_then</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>name<span class="token closure-punctuation punctuation">|</span></span> name<span class="token punctuation">.</span><span class="token function">to_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">                <span class="token punctuation">.</span><span class="token function">and_then</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>s<span class="token closure-punctuation punctuation">|</span></span> s<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token keyword">u32</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">                <span class="token punctuation">.</span><span class="token function">is_some</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token comment">// Fields we want to display</span></span><br><span class="highlight-line">    <span class="token keyword">let</span> wanted_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Name"</span><span class="token punctuation">,</span> <span class="token string">"State"</span><span class="token punctuation">,</span> <span class="token string">"Pid"</span><span class="token punctuation">,</span> <span class="token string">"PPid"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token comment">// Collect all process data</span></span><br><span class="highlight-line">    <span class="token keyword">let</span> <span class="token keyword">mut</span> processes <span class="token operator">=</span> <span class="token class-name">Vec</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">for</span> entry <span class="token keyword">in</span> entries <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">let</span> <span class="token keyword">mut</span> path <span class="token operator">=</span> entry<span class="token punctuation">;</span></span><br><span class="highlight-line">        path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">        <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token namespace">fs<span class="token punctuation">::</span></span><span class="token function">read_to_string</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>path<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token keyword">let</span> fields<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token operator">=</span> status</span><br><span class="highlight-line">                <span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">                <span class="token punctuation">.</span><span class="token function">filter_map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>line<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                    <span class="token keyword">let</span> <span class="token keyword">mut</span> parts <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">splitn</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token char">':'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">                    <span class="token keyword">let</span> name <span class="token operator">=</span> parts<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">                    <span class="token keyword">let</span> value <span class="token operator">=</span> parts<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">                    <span class="token comment">// Only keep fields we want</span></span><br><span class="highlight-line">                    <span class="token keyword">if</span> wanted_fields<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>name<span class="token punctuation">.</span><span class="token function">as_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                        <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                        <span class="token class-name">None</span></span><br><span class="highlight-line">                    <span class="token punctuation">}</span></span><br><span class="highlight-line">                <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">            <span class="token keyword">if</span> <span class="token operator">!</span>fields<span class="token punctuation">.</span><span class="token function">is_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                processes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fields<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">            <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">if</span> processes<span class="token punctuation">.</span><span class="token function">is_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token comment">// Print headers</span></span><br><span class="highlight-line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> wanted_fields<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token comment">// Print values for each process</span></span><br><span class="highlight-line">    <span class="token keyword">for</span> fields <span class="token keyword">in</span> <span class="token operator">&amp;</span>processes <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">let</span> values<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span>_<span class="token operator">></span> <span class="token operator">=</span> wanted_fields</span><br><span class="highlight-line">            <span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>field_name<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">                fields</span><br><span class="highlight-line">                    <span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">                    <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token closure-punctuation punctuation">|</span></span> name <span class="token operator">==</span> field_name<span class="token punctuation">)</span></span><br><span class="highlight-line">                    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token closure-punctuation punctuation">|</span></span> value<span class="token punctuation">.</span><span class="token function">as_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">                    <span class="token punctuation">.</span><span class="token function">unwrap_or</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span></span><br><span class="highlight-line">            <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> values<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span></code></pre>
<p><a href="https://docs.kernel.org/filesystems/proc.html" class="blue link hover-light-pink">/proc docs</a></p>
<p>Going to keep diving deep into <code>/proc</code> and learning about processes in general. Party hard!</p>

          </div>
        </article>
      </article>
    </main>
  </body>
</html>
